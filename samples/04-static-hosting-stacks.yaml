# Sample Manifest for Static Hosting Stacks
# This manifest creates static hosting infrastructure with S3, CloudFront, and ACM
# Stacks Created: StaticHostingDomainStack, StaticHostingFrontendStack

# yaml-language-server: $schema=https://schemas.codeiqlabs.dev/aws/manifest.schema.json

# ============================================================================
# CORE CONFIGURATION
# ============================================================================
project: "MyWebsite"
company: "MyCompany"

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================
deployment:
  accountId: "234567890123" # Workload account for static hosting
  region: "us-east-1"

# ============================================================================
# MULTI-ENVIRONMENT CONFIGURATION
# ============================================================================
environments:
  # Non-Production Environment
  nprd:
    accountId: "234567890123"
    region: "us-east-1"

    config:
      # Domain configuration for StaticHostingDomainStack
      domain:
        name: "staging.mycompany.com"
        parentDomain: "mycompany.com"
        parentHostedZoneId: "Z1234567890ABC" # Parent domain's hosted zone ID

        # Alternative domain names (optional)
        alternativeDomainNames:
          - "www.staging.mycompany.com"

        # Certificate validation method
        certificateValidation: "DNS"

      # Frontend configuration for StaticHostingFrontendStack
      frontend:
        # S3 bucket configuration
        s3:
          bucketName: "mywebsite-staging-frontend" # Optional: auto-generated if not specified
          versioning: true
          accessLogging: false

        # CloudFront distribution configuration
        cloudfront:
          priceClass: "PriceClass_100" # US, Canada, Europe
          compress: true
          defaultRootObject: "index.html"

          # Error responses for SPA
          errorResponses:
            - httpStatus: 404
              responseHttpStatus: 200
              responsePagePath: "/index.html"
              ttl: 300
            - httpStatus: 403
              responseHttpStatus: 200
              responsePagePath: "/index.html"
              ttl: 300

  # Production Environment
  prod:
    accountId: "345678901234" # Different account for production
    region: "us-east-1"

    config:
      # Domain configuration for StaticHostingDomainStack
      domain:
        name: "www.mycompany.com"
        parentDomain: "mycompany.com"
        parentHostedZoneId: "Z1234567890ABC"

        alternativeDomainNames:
          - "mycompany.com"

        certificateValidation: "DNS"

      # Frontend configuration for StaticHostingFrontendStack
      frontend:
        s3:
          bucketName: "mywebsite-prod-frontend"
          versioning: true
          accessLogging: true # Enable access logging in production

        cloudfront:
          priceClass: "PriceClass_All" # Global distribution for production
          compress: true
          defaultRootObject: "index.html"

          errorResponses:
            - httpStatus: 404
              responseHttpStatus: 200
              responsePagePath: "/index.html"
              ttl: 300
            - httpStatus: 403
              responseHttpStatus: 200
              responsePagePath: "/index.html"
              ttl: 300

# ============================================================================
# STATIC HOSTING COMPONENT
# ============================================================================
staticHosting:
  enabled: true

# ============================================================================
# DEPLOYMENT OPTIONS
# ============================================================================
options:
  enableCostOptimization: true
  enablePerformanceMonitoring: true
  defaultTags:
    Owner: "Web Team"
    ManagedBy: "CDK"
    Project: "MyWebsite"
